# æ­£åˆ™è¡¨è¾¾å¼å¥½éš¾å­¦!9ä¸ªæ˜“æ‡‚çš„ä¾‹å­ï¼Œè½»æ¾å…¥é—¨JavaScriptæ­£åˆ™
![](https://upload-images.jianshu.io/upload_images/16777-135b4af3b8243503.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

æ­£åˆ™è¡¨è¾¾å¼æ˜¯ç”¨æ¥æè¿°å­—ç¬¦æ¨¡å¼çš„å¯¹è±¡ã€‚å®ƒè¢«ç”¨æ¥åœ¨æ–‡æœ¬ä¸­æ‰§è¡Œæ¨¡å¼åŒ¹é…(pattern-matching)ä»¥åŠâ€æŸ¥æ‰¾-æ›¿æ¢â€(search-and-replace)çš„ä»»åŠ¡ã€‚

å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šåœ¨è¿™äº›åœ°æ–¹çœ‹åˆ°æ­£åˆ™ï¼š
* éªŒè¯æ‰‹æœºå·ï¼Œé‚®ä»¶ï¼Œèº«ä»½è¯å·ç­‰æ˜¯å¦åˆæ³•ã€‚
* åˆ é™¤å­—ç¬¦ä¸²å‰åå¤šä½™çš„ç©ºæ ¼ã€‚
* ä»æµè§ˆå™¨çš„UserAgentä¿¡æ¯ä¸­æå–å‡ºå½“å‰æ˜¯ä»€ä¹ˆæµè§ˆå™¨ï¼Œä»¥åŠæµè§ˆå™¨çš„ç‰ˆæœ¬ã€‚æ¥åšä¸€äº›å…¼å®¹æ€§å¤„ç†ã€‚

æ­£åˆ™è¡¨è¾¾å¼ç»™äººçš„æ„Ÿè§‰ï¼šå¾ˆéš¾è¯»æ‡‚ï¼Œä¹Ÿéš¾å†™ã€‚è°çŸ¥é“ä¸‹é¢2ä¸ªæ­£åˆ™æ˜¯å¹²å˜›çš„å—ğŸ˜‚
* `/<\/?[a-zA-Z]+(\s+[a-zA-Z]+=".*")*>/g`
* `/^w+([-+.]w+)*@w+([-.]w+)*.w+([-.]w+)*$/ /^[a-zA-Z][a-zA-Z0-9_]{2,6}$/`

## ä¸ºä»€ä¹ˆè¦å­¦ä¹ æ­£åˆ™ï¼Ÿ
æ­£åˆ™è¡¨è¾¾å¼ç”¨ç®€çŸ­çš„ä»£ç ï¼Œèƒ½å®ç°éå¸¸å¤æ‚çš„æ–‡æœ¬æŸ¥æ‰¾æ›¿æ¢æ“ä½œã€‚ç”¨å­—ç¬¦ä¸²çš„apiæ¥å®ç°åŒæ ·çš„åŠŸèƒ½ï¼Œä»£ç ä¼šå¤æ‚çš„å¤šï¼Œä»£ç é‡ä¹Ÿä¼šå¤šçš„å¤šã€‚æ¯”å¦‚ï¼ŒéªŒè¯æ‰‹æœºå·æ˜¯å¦åˆæ³•ã€‚æˆ‘ä»¬å‡å®šï¼Œåˆæ³•çš„æ‰‹æœºå·æŒ‡ï¼šä»¥1å¼€å¤´çš„11ä½æ•°å­—ã€‚

ç”¨å­—ç¬¦ä¸²çš„apiï¼Œè¿™ä¹ˆå†™ï¼š
```js
function validPhone(phone) {
  let isValid = false
  phone += ''
  if (phone.length === 11 && phone[0] === '1' && !isNaN(phone)) {
    isValid = true
  }
  return isValid
}
```

ç”¨æ­£åˆ™ï¼Œä¸€è¡Œä»£ç æå®šï¼š
```js
/^1\d{10}$/.test(phone)
```

å¯è§ï¼Œç†Ÿç»ƒæŒæ¡æ­£åˆ™è¡¨è¾¾å¼ï¼Œèƒ½æå¤§çš„æå‡å¼€å‘æ–‡æœ¬çš„æŸ¥æ‰¾æ›¿æ¢åŠŸèƒ½çš„å¼€å‘æ•ˆç‡ã€‚

## ä¾‹å­
å­¦ä¹ æ­£åˆ™è¡¨è¾¾å¼çš„æœ€å¥½æ–¹æ³•æ˜¯ä»ä¾‹å­å¼€å§‹ï¼Œç†è§£ä¾‹å­ä¹‹åå†è‡ªå·±å¯¹ä¾‹å­è¿›è¡Œä¿®æ”¹ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°±å¼€å§‹å§~

### ä¾‹å­1: ç²¾ç¡®åŒ¹é…
æŸ¥æ‰¾æ–‡æœ¬ä¸­æ˜¯å¦åŒ…å«catã€‚ä»£ç å®ç°å¦‚ä¸‹:
```
/cat/.test('I have a cat.') // è¿”å›true
/cat/.test('I have a dog.') // è¿”å› false
```

ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ`/cat/` åˆ›å»ºäº†ä¸€ä¸ªåŒ¹é… cat çš„æ­£åˆ™ã€‚æœ‰ä¸¤ç§æ–¹å¼åˆ›å»ºæ­£åˆ™å¯¹è±¡ï¼š
1. `/åŒ¹é…æ¨¡å¼/`ã€‚ å¦‚ `/cat/`ã€‚
2. `new RegExp(åŒ¹é…æ¨¡å¼å­—ç¬¦ä¸²)`ã€‚ å¦‚ `new RegExp('cat')`ã€‚

è¿™ä¸¤ç§æ–¹å¼çš„ä¸åŒç‚¹åœ¨äºï¼Œæ–¹å¼2æ”¯æŒä¼ å…¥å˜é‡ã€‚

`test` æ˜¯æ­£åˆ™å¯¹è±¡ä¸Šçš„æ–¹æ³•ï¼Œç”¨æ¥æ£€ç´¢å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«æŒ‡å®šçš„å€¼ã€‚è¿”å› true æˆ– falseã€‚è¿˜æœ‰ä¸€ä¸ªå¸¸è§çš„æ­£åˆ™æ–¹æ³• execï¼Œç”¨æ¥æ£€ç´¢å­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„å€¼ã€‚

å­—ç¬¦ä¸²çš„[split](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/split)ï¼Œ[search](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/search)ï¼Œ[replace](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/replace)ï¼Œ[match](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/match)æ–¹æ³•æ”¯æŒä¼ å…¥æ­£åˆ™ã€‚

### ä¾‹å­2: åŒ¹é…ä¸€ç±»å­—ç¬¦ï¼šæ•°å­—ï¼Œå­—æ¯ï¼Œç©ºæ ¼ç­‰
æŸ¥æ‰¾æ–‡æœ¬æ˜¯å¦æœ‰æ•°å­—ã€‚ä»£ç å®ç°å¦‚ä¸‹
```js
/\d/.test('3C') // true
```

å¸¸è§å­—ç¬¦ç±»å‹çš„åŒ¹é…æ–¹å¼å¦‚ä¸‹ï¼š
* `.`: åŒ¹é…ä¸€ä¸ªä»»æ„å­—ç¬¦ã€‚
* `\d`: åŒ¹é…ä¸€ä¸ªæ•°å­—ã€‚
* `\D`: åŒ¹é…ä¸€ä¸ªéæ•°å­—å­—ç¬¦ã€‚
* `[a-z]`: åŒ¹é…ä¸€ä¸ªå°å†™å­—æ¯ã€‚
* `[A-Z]`: åŒ¹é…ä¸€ä¸ªå¤§å†™å­—æ¯ã€‚
* `[\u4e00-\u9fa5]`: åŒ¹é…ä¸€ä¸ªä¸­æ–‡å­—ã€‚
* `\w`: åŒ¹é…å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€‚ç­‰ä»·äº[A-Za-z0-9_]ã€‚
* `\s`: åŒ¹é…ä»»ä½•ç©ºç™½å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰ç­‰ã€‚
* `\S`: åŒ¹é…ä»»ä½•éç©ºç™½å­—ç¬¦ã€‚
* `\\`: åŒ¹é…\ã€‚

### ä¾‹å­3: åŒ¹é…æŒ‡å®šèŒƒå›´å†…å­—ç¬¦
æŸ¥æ‰¾æ–‡æœ¬ä¸­æ˜¯å¦åŒ…å« ab12 ä¸­ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚ä»£ç å®ç°å¦‚ä¸‹:
```js
/[ab12]/.test('a') // true
/[ab12]/.test('b') // true
/[ab12]/.test('1') // true
/[ab12]/.test('2') // true
```
![](https://upload-images.jianshu.io/upload_images/16777-1709cdf70e62feb0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


ç”¨ `[æŒ‡å®šèŒƒå›´]` æ¥åŒ¹é…æŒ‡å®šèŒƒå›´å†…å­—ç¬¦ã€‚ ç”¨ `[^æŒ‡å®šèŒƒå›´]` æ¥åŒ¹é…ä¸åœ¨æŒ‡å®šèŒƒå›´å†…çš„å­—ç¬¦ã€‚å¦‚ï¼š`/[^a-z]/` åŒ¹é…éå°å†™å­—æ¯ã€‚

### ä¾‹å­4: åŒ¹é…é‡å¤
æŸ¥æ‰¾æ–‡æœ¬ä¸­æ˜¯å¦åŒ…å«5ä¸ªaã€‚è›®å¹²ç‰ˆï¼Œä»£ç å®ç°å¦‚ä¸‹:
```js
/aaaaa/.test('aaaaa') // true
```

ä¼˜é›…ç‰ˆ:
```
/a{5}/.test('aaaaa') // true
```
![](https://upload-images.jianshu.io/upload_images/16777-70502cd5c7887824.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

æŸ¥æ‰¾æ–‡æœ¬ä¸­æ˜¯å¦åŒ…å«3ä¸ªabã€‚ä»£ç å®ç°å¦‚ä¸‹:
```js
/(ab){3}/.test('ababab') // true
```

æ³¨æ„ï¼Œä¸Šé¢çš„ä»£ç ä¸­ï¼Œç”¨æ‹¬å·åŒ…èµ·æ¥abï¼ŒæŠŠabå˜æˆä¸€ä¸ªæ•´ä½“ã€‚ä¸åŠ æ‹¬å·ï¼ŒåŒ¹é…çš„æ˜¯abbbã€‚

é‡å¤å­—ç¬¦çš„åŒ¹é…æ–¹å¼å¦‚ä¸‹ï¼š
* \*: åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–å¤šæ¬¡ã€‚
* +: åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ä¸€æ¬¡æˆ–å¤šæ¬¡ã€‚
* ?: åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–ä¸€æ¬¡ã€‚
* {n}: åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ç¡®å®šçš„ n æ¬¡ã€‚
* {n,}: åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼è‡³å°‘ n æ¬¡ã€‚
* {n,m}: åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ n åˆ° mä¹‹é—´ã€‚

æ›´å¤šä¾‹å­ï¼š
```js
/a\*/ // åŒ¹é…ä»»æ„ä¸ªa
/https?/ // åŒ¹é… http å’Œ https
/1\d{10}/ // 11ä½æ‰‹æœºå·
```

### ä¾‹å­5: åŒ¹é…æ–‡æœ¬ä»¥...å¼€å§‹å’Œä»¥...ç»“å°¾
æŸ¥æ‰¾æ–‡æœ¬æ˜¯å¦ä»¥å­—æ¯å¼€å¤´ï¼Œä»¥æ•°å­—ç»“å°¾ã€‚ä»£ç å®ç°å¦‚ä¸‹:
```js
/^[a-zA-Z].*\d$/.test('ab1') // true
```
![](https://upload-images.jianshu.io/upload_images/16777-8cd424c6a0825d33.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

`^`ç”¨æ¥åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®ã€‚`$`ç”¨æ¥åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®ã€‚

### ä¾‹å­6: åŒ¹é…å¤šç§æƒ…å†µ
æŸ¥æ‰¾æ–‡æœ¬æ˜¯åŒ…å«138æˆ–åŒ…å«159ã€‚ä»£ç å®ç°å¦‚ä¸‹:
```js
/(138|159)/.test('138') // true
/(138|159)/.test('159') // true
```
![](https://upload-images.jianshu.io/upload_images/16777-5b4c2be2ac3abfb1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

`|`ç”¨æ¥åŒ¹é…å¤šç§æƒ…å†µã€‚æ³¨æ„ï¼Œæƒ…å†µåŒ…å«çš„å­—ç¬¦æ•°é‡è¶…è¿‡ä¸€ä¸ªï¼Œè¦ç”¨æ‹¬å·åŒ…èµ·æ¥ã€‚åä¾‹ï¼š
```js
/138|159/.test('138') // false
/138|159/.test('13859') // true
/138|159/.test('13159') // true
````

### ä¾‹å­7: åŒ¹é…æ¨¡å¼
æŸ¥æ‰¾æ–‡æœ¬ä¸­æ˜¯å¦å…¨éƒ¨æ˜¯å­—æ¯ã€‚å®ç°æ–¹æ³•1:
```js
/^[a-zA-Z]*$/.test('abcABC') // true
```

æ–¹æ³•2:
```
/^[a-z]*$/i.test('abcABC') // true
```

æ–¹æ³•2ä¸­çš„iæ˜¯åŒ¹é…æ¨¡å¼ã€‚å¸¸è§çš„åŒ¹é…æ¨¡å¼å¦‚ä¸‹ï¼š
* g : æ‰§è¡Œå…¨å±€åŒ¹é…ï¼ˆæŸ¥æ‰¾æ‰€æœ‰åŒ¹é…è€Œéåœ¨æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…ååœæ­¢ï¼‰
* i : æ‰§è¡Œå¯¹å¤§å°å†™ä¸æ•æ„Ÿçš„åŒ¹é…ã€‚
* m : æ‰§è¡Œå¤šè¡ŒåŒ¹é…ã€‚

ä¸€ä¸ªæ­£åˆ™å¯ä»¥æœ‰å¤šä¸ªæ¨¡å¼ï¼Œè¡¨ç¤ºå¯¹å¤šä¸ªæ¨¡å¼çš„å åŠ ã€‚å¦‚ `/a/ig`ã€‚

### ä¾‹å­8: åŒ¹é…çš„äº‰å¤ºï¼šè´ªå©ªæ¨¡å¼å’Œéè´ªå©ªæ¨¡å¼
åŒ¹é…æ–‡æœ¬ä¸­çš„éç©ºç™½å­—ç¬¦å’Œæ•°å­—ï¼Œè¦å°½é‡å¤šåŒ¹é…æ•°å­—ã€‚ä»£ç å®ç°å¦‚ä¸‹:
```js
/(\S+?)(\d*)/.exec('a123') // ["a123", "a", "123"]
// è¿™ç§å†™æ³•ï¼Œä¼šå°½å¯èƒ½å¤šçš„åŒ¹é…éç©ºç™½å­—ç¬¦ï¼š/(\S+)(\d*)/.exec('a123') // ["a123", "a123", ""]
```
![](https://upload-images.jianshu.io/upload_images/16777-6edab1efc6c0a74a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

å½“æ­£åˆ™è¡¨è¾¾å¼ä¸­åŒ…é‡å¤çš„é™å®šç¬¦(\*+,?, {n}, {n,}, {n,m})æ—¶ï¼ŒåŒ¹é…æ¨¡å¼æ˜¯è´ªå©ªçš„ï¼šåŒ¹é…å°½å¯èƒ½å¤šçš„å­—ç¬¦ã€‚åœ¨é‡å¤çš„é™å®šç¬¦ååŠ ?ï¼Œä¼šå°†åŒ¹é…æ¨¡å¼æ”¹æˆéè´ªå©ªçš„ï¼šåŒ¹é…å°½å¯èƒ½å°‘çš„å­—ç¬¦ã€‚

### ä¾‹å­9: æ–‡æœ¬æ›¿æ¢
å°†æ–‡æœ¬ä¸­å•è¯"cat"æ›¿æ¢æˆ"dog"ã€‚ä»£ç å®ç°å¦‚ä¸‹:
```js
'I have a cat.'.replace(/cat/, 'dog') // è¿è¡Œç»“æœ I have a dog.
```

å°†æ–‡æœ¬ä¸­æ‰€æœ‰çš„å•è¯"cat"æ›¿æ¢æˆ"dog"ã€‚ä»£ç å®ç°å¦‚ä¸‹:
```js
'cat,cat,cat'.replace(/cat/g, 'dog') // è¿è¡Œç»“æœ dog,dog,dog
```

å°†ç¬¬2ä¸ªå‡ºç°çš„"cat"æ›¿æ¢æˆ"dog"ã€‚ä»£ç å®ç°å¦‚ä¸‹:
```js
let appearNum = 0
let res = 'cat,cat,cat'.replace(/cat/g, (matched) => {
  appearNum++
  if(appearNum === 2) {
    return 'dog'
  } else {
    return matched
  }
})
console.log(res) // è¿è¡Œç»“æœ cat,dog,cat
```

## æ¨èå·¥å…·
### [RegExr](https://regexr.com/)
æ­£åˆ™æµ‹è¯•å·¥å…·ã€‚

### [Regulex](https://jex.im/regulex/) 
JavaScript æ­£åˆ™å¯è§†åŒ–å·¥å…·ã€‚å±•ç¤ºæ•ˆæœ:
![Regulexè¿è¡Œç»“æœ](https://upload-images.jianshu.io/upload_images/16777-fea567a5bf875ddc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## æ€»ç»“
ç†Ÿç»ƒæŒæ¡æ­£åˆ™è¡¨è¾¾å¼ï¼Œèƒ½æå¤§çš„æå‡å¼€å‘æ–‡æœ¬çš„æŸ¥æ‰¾æ›¿æ¢åŠŸèƒ½çš„å¼€å‘æ•ˆç‡ã€‚å¤§å®¶æœ‰å¿…è¦å»è®¤çœŸå­¦ä¸€ä¸‹ã€‚

æœ¬æ–‡ä»‹ç»äº†æ­£åˆ™çš„åŸºç¡€ã€‚æ­£åˆ™åšå¤§ç²¾æ·±ï¼Œè¿˜æœ‰å¾ˆå¤šå€¼å¾—ç ”ç©¶ã€‚

## å‚è€ƒ&æ¨èé˜…è¯»
* [æ­£åˆ™è¡¨è¾¾å¼30åˆ†é’Ÿå…¥é—¨æ•™ç¨‹](https://deerchao.cn/tutorials/regex/regex.htm)
* [çŸ¥é“è¿™20ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œèƒ½è®©ä½ å°‘å†™1,000è¡Œä»£ç ](https://www.jianshu.com/u/3313b20a4e25)
* [è¯æ³•åˆ†æï¼šä»REï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰åˆ°DFAï¼ˆç¡®å®šçš„æœ‰é™çŠ¶æ€æœºï¼‰](https://blog.csdn.net/cuiods/article/details/52673154)



